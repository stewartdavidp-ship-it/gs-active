Game Shelf PWA v1.2.69 Release Notes
=====================================

Release Date: January 27, 2026

SECURITY FIXES:
---------------
* Fixed remaining XSS vulnerability in public battles display
  - battle.name now properly escaped with escapeHtml()
  - battle.id escaped with escapeAttr() in onclick handlers

* Added input sanitization at source
  - New sanitizeTextInput() function strips HTML tags and dangerous chars
  - New isValidDisplayName() validator for display name format
  - Battle names sanitized before storing in database

TECHNICAL:
----------
* Defense in depth: escape on input AND output
* Battle name input limited to 30 chars, HTML stripped
* Display name validation: alphanumeric, spaces, basic punctuation only

---

Game Shelf PWA v1.2.68 Release Notes
=====================================

Release Date: January 27, 2026

SECURITY FIXES:
---------------
* Fixed XSS vulnerability in user-generated content display
  - Added escapeHtml() and escapeAttr() sanitization functions
  - 54 total sanitization points across the application
  
* User content areas patched:
  - Contact search results and friend addition
  - Friend cards, lists, and profiles
  - Leaderboard entries
  - Activity feed
  - Profile view headers and actions
  - Battle participants, standings, and results
  - Recommendation cards (challenge/nudge friend)
  - Account modal and menu account section
  - Game search "no results" message
  - Setup image upload preview
  - Battle impact tips

* Defense in depth applied to:
  - All displayName renders
  - All photoURL attributes
  - All onclick handler parameters with user IDs
  - Numeric values sanitized with parseInt()

TECHNICAL:
----------
* All user-controlled strings pass through HTML entity encoding
* URL attributes use attribute-safe encoding
* Numbers use parseInt() before display
* 54 escapeHtml/escapeAttr calls throughout codebase

---

Game Shelf PWA v1.2.67 Release Notes
=====================================

Release Date: January 27, 2026

NEW FEATURES:
-------------
* Reset Purchase Limits - New developer option in Settings
  - Clears purchase history after data reset
  - Allows re-testing the coin purchase flow
  - Only works when wallet is at default state (â‰¤50 tokens, 0 coins)
  - Located in Settings â†’ Developer section

FIREBASE FUNCTIONS:
-------------------
* Added resetPurchaseHistory Cloud Function
  - Validates wallet state before allowing reset
  - Logs reset actions for audit trail

---

v1.2.66 Release Notes
=====================

Release Date: January 27, 2026

BUG FIXES:
----------
* Added try/catch to coin conversion for safer cloud sync
* Fixed forceRefresh promise chain error handling
* Fixed forceAppUpdate getRegistration error handling
* Fixed loadFromCloud auth restore error handling

TECHNICAL:
----------
* Error handling audit completed
* All async operations now have proper error handling
* Promise chains now have .catch() handlers

---

v1.2.65 Release Notes
=====================

Release Date: January 27, 2026

BUG FIXES:
----------
* Improved Firebase initialization with graceful fallback
  - App no longer crashes if Firebase SDK blocked (e.g., ad blockers)
  - Runs in offline mode when Firebase unavailable
* Fixed all clipboard operations to handle errors properly
  - All copy-to-clipboard now shows error if copy fails
  - Share dialog fallbacks work correctly

TECHNICAL:
----------
* Auth audit completed - all auth state checks consistent
* Promise error handling improved throughout

---

v1.2.64 Release Notes
=====================

BUG FIXES:
----------
* Fixed Transaction History "Sign in required" error when already signed in
  - Was checking wrong variable (window.firebaseUser instead of currentUser)
  - Was using wrong database reference (window.firebaseDB instead of db)

---

v1.2.63 Release Notes
=====================

NEW FEATURES:
-------------
* Transaction History - View your complete wallet activity
  - Coin purchases (amount, cost, date)
  - Token usage (AI hints)
  - Gift redemptions
  - Sorted by date (newest first)
  - Shows last 50 transactions

* Access via: Wallet â†’ "ðŸ“œ Transaction History" button

NOTES:
------
* Requires Firebase Functions with Stripe integration
* Transaction data stored in Firebase Realtime Database
