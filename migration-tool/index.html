<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Shelf Migration Tool</title>
    <meta name="version" content="1.1.0">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { box-sizing: border-box; }
        body { 
            margin: 0; 
            font-family: system-ui, -apple-system, sans-serif; 
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: #e2e8f0; 
        }
        .animate-spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .pulse { animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        .slide-in { animation: slideIn 0.4s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
        pre { white-space: pre-wrap; word-break: break-word; }
        .diff-add { background: rgba(34, 197, 94, 0.2); border-left: 3px solid #22c55e; }
        .diff-remove { background: rgba(239, 68, 68, 0.2); border-left: 3px solid #ef4444; }
        .diff-context { background: rgba(100, 116, 139, 0.1); }
    </style>
</head>
<body>
    <div id="root">
        <div style="display:flex;align-items:center;justify-content:center;min-height:100vh;">
            <div class="pulse">Loading Migration Tool...</div>
        </div>
    </div>

    <script type="text/babel">
    const VERSION = '1.1.0';
    
    // =========================================================================
    // ENVIRONMENT CONFIGURATIONS
    // =========================================================================
    
    const ENVIRONMENTS = {
        prod: {
            name: 'Production',
            description: 'Consolidate under gameshelf.co',
            targetRepo: 'stewartdavidp-ship-it/gameshelf',
            targetBaseUrl: '',  // Root domain - gameshelf.co
            targetDomain: 'gameshelf.co',
            color: 'green',
            apps: {
                gameshelf: {
                    id: 'gameshelf',
                    name: 'Game Shelf',
                    icon: 'ðŸŽ®',
                    sourceRepo: 'stewartdavidp-ship-it/gameshelf',
                    targetPath: '',  // Root
                    files: ['index.html', 'sw.js', 'manifest.json', 'CNAME'],
                    iconFolders: ['icons'],
                    isHub: true  // Don't migrate the hub, it's already there
                },
                quotle: {
                    id: 'quotle',
                    name: 'Quotle',
                    icon: 'ðŸ’¬',
                    sourceRepo: 'stewartdavidp-ship-it/quotle',
                    targetPath: 'quotle',
                    files: ['index.html', 'sw.js', 'manifest.json'],
                    iconFolders: ['icons']
                },
                slate: {
                    id: 'slate',
                    name: 'Slate',
                    icon: 'ðŸª¨',
                    sourceRepo: 'stewartdavidp-ship-it/slate',
                    targetPath: 'slate',
                    files: ['index.html', 'sw.js', 'manifest.json'],
                    iconFolders: ['icons']
                },
                rungs: {
                    id: 'rungs',
                    name: 'Rungs',
                    icon: 'ðŸªœ',
                    sourceRepo: 'stewartdavidp-ship-it/rungs',
                    targetPath: 'rungs',
                    files: ['index.html', 'sw.js', 'manifest.json'],
                    iconFolders: ['icons']
                },
                wordboxing: {
                    id: 'wordboxing',
                    name: 'Word Boxing',
                    icon: 'ðŸ¥Š',
                    sourceRepo: 'stewartdavidp-ship-it/wordboxing',
                    targetPath: 'wordboxing',
                    files: ['index.html', 'sw.js', 'manifest.json'],
                    iconFolders: ['icons']
                }
            }
        },
        test: {
            name: 'Test',
            description: 'Consolidate under gameshelftest',
            targetRepo: 'stewartdavidp-ship-it/gameshelftest',
            targetBaseUrl: '/gameshelftest',
            targetDomain: 'stewartdavidp-ship-it.github.io/gameshelftest',
            color: 'blue',
            apps: {
                gameshelf: {
                    id: 'gameshelf',
                    name: 'Game Shelf',
                    icon: 'ðŸŽ®',
                    sourceRepo: 'stewartdavidp-ship-it/gameshelftest',
                    targetPath: '',  // Root
                    files: ['index.html', 'sw.js', 'manifest.json', 'manifest-test.json'],
                    iconFolders: ['icons', 'icons-test'],
                    isHub: true
                },
                quotle: {
                    id: 'quotle',
                    name: 'Quotle',
                    icon: 'ðŸ’¬',
                    sourceRepo: 'stewartdavidp-ship-it/quotletest',
                    targetPath: 'quotle',
                    files: ['index.html', 'sw.js', 'manifest.json'],
                    iconFolders: ['icons']
                },
                slate: {
                    id: 'slate',
                    name: 'Slate',
                    icon: 'ðŸª¨',
                    sourceRepo: 'stewartdavidp-ship-it/slatetest',
                    targetPath: 'slate',
                    files: ['index.html', 'sw.js', 'manifest.json'],
                    iconFolders: ['icons']
                },
                rungs: {
                    id: 'rungs',
                    name: 'Rungs',
                    icon: 'ðŸªœ',
                    sourceRepo: 'stewartdavidp-ship-it/Rungstest',
                    targetPath: 'rungs',
                    files: ['index.html', 'sw.js', 'manifest.json'],
                    iconFolders: ['icons']
                },
                wordboxing: {
                    id: 'wordboxing',
                    name: 'Word Boxing',
                    icon: 'ðŸ¥Š',
                    sourceRepo: 'stewartdavidp-ship-it/wordboxingtest',
                    targetPath: 'wordboxing',
                    files: ['index.html', 'sw.js', 'manifest.json'],
                    iconFolders: ['icons']
                }
            }
        }
    };
    
    // =========================================================================
    // GITHUB API
    // =========================================================================
    
    class GitHubAPI {
        constructor(token) {
            this.token = token;
            this.baseUrl = 'https://api.github.com';
        }
        
        async request(endpoint, options = {}) {
            const response = await fetch(`${this.baseUrl}${endpoint}`, {
                ...options,
                headers: {
                    'Authorization': `token ${this.token}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json',
                    ...options.headers
                }
            });
            if (!response.ok) {
                const error = await response.json().catch(() => ({}));
                throw new Error(error.message || `GitHub API error: ${response.status}`);
            }
            return response.json();
        }
        
        async getFile(repo, path) {
            try {
                const [owner, repoName] = repo.split('/');
                return await this.request(`/repos/${owner}/${repoName}/contents/${path}?_=${Date.now()}`);
            } catch (e) { 
                console.log(`File not found: ${repo}/${path}`);
                return null; 
            }
        }
        
        async listContents(repo, path = '') {
            try {
                const [owner, repoName] = repo.split('/');
                const endpoint = path 
                    ? `/repos/${owner}/${repoName}/contents/${path}`
                    : `/repos/${owner}/${repoName}/contents`;
                return await this.request(endpoint);
            } catch (e) {
                console.log(`Could not list: ${repo}/${path}`);
                return [];
            }
        }
        
        decodeContent(content) {
            const clean = content.replace(/[\r\n\s]/g, '');
            return decodeURIComponent(escape(atob(clean)));
        }
        
        encodeContent(text) {
            return btoa(unescape(encodeURIComponent(text)));
        }
        
        cleanBase64(content) {
            return content ? content.replace(/[\r\n\s]/g, '') : '';
        }
        
        async batchCommit(repo, files, message) {
            const [owner, repoName] = repo.split('/');
            
            const ref = await this.request(`/repos/${owner}/${repoName}/git/ref/heads/main`);
            const commitSha = ref.object.sha;
            
            const commit = await this.request(`/repos/${owner}/${repoName}/git/commits/${commitSha}`);
            const treeSha = commit.tree.sha;
            
            const treeItems = [];
            for (const file of files) {
                const blob = await this.request(`/repos/${owner}/${repoName}/git/blobs`, {
                    method: 'POST',
                    body: JSON.stringify({
                        content: file.content,
                        encoding: file.encoding || 'base64'
                    })
                });
                
                treeItems.push({
                    path: file.path,
                    mode: '100644',
                    type: 'blob',
                    sha: blob.sha
                });
            }
            
            const newTree = await this.request(`/repos/${owner}/${repoName}/git/trees`, {
                method: 'POST',
                body: JSON.stringify({
                    base_tree: treeSha,
                    tree: treeItems
                })
            });
            
            const newCommit = await this.request(`/repos/${owner}/${repoName}/git/commits`, {
                method: 'POST',
                body: JSON.stringify({
                    message,
                    tree: newTree.sha,
                    parents: [commitSha]
                })
            });
            
            await this.request(`/repos/${owner}/${repoName}/git/refs/heads/main`, {
                method: 'PATCH',
                body: JSON.stringify({ sha: newCommit.sha })
            });
            
            return { sha: newCommit.sha, filesCommitted: files.length };
        }
        
        async testConnection() {
            const user = await this.request('/user');
            return user;
        }
    }
    
    // =========================================================================
    // TRANSFORMATION FUNCTIONS
    // =========================================================================
    
    function transformManifest(content, appId, targetPath, env) {
        try {
            const manifest = JSON.parse(content);
            const envConfig = ENVIRONMENTS[env];
            
            // For prod with custom domain, path is just /quotle/
            // For test on GitHub Pages, path is /gameshelftest/quotle/
            let basePath;
            if (env === 'prod') {
                basePath = targetPath ? `/${targetPath}/` : '/';
            } else {
                basePath = targetPath ? `${envConfig.targetBaseUrl}/${targetPath}/` : `${envConfig.targetBaseUrl}/`;
            }
            
            const oldStartUrl = manifest.start_url;
            const oldScope = manifest.scope;
            
            manifest.start_url = basePath;
            manifest.scope = basePath;
            manifest.id = basePath;
            
            return {
                transformed: JSON.stringify(manifest, null, 2),
                changes: [
                    { field: 'start_url', from: oldStartUrl, to: basePath },
                    { field: 'scope', from: oldScope, to: basePath },
                    { field: 'id', to: basePath }
                ]
            };
        } catch (e) {
            console.error('Manifest transform error:', e);
            return { transformed: content, changes: [], error: e.message };
        }
    }
    
    function transformServiceWorker(content, appId, targetPath, env) {
        const changes = [];
        let transformed = content;
        const envConfig = ENVIRONMENTS[env];
        
        let basePath;
        if (env === 'prod') {
            basePath = targetPath ? `/${targetPath}/` : '/';
        } else {
            basePath = targetPath ? `${envConfig.targetBaseUrl}/${targetPath}/` : `${envConfig.targetBaseUrl}/`;
        }
        
        // Pattern 1: Update CACHE_NAME to include app identifier
        const cacheNameMatch = transformed.match(/const\s+CACHE_NAME\s*=\s*['"`]([^'"`]+)['"`]/);
        if (cacheNameMatch) {
            const oldName = cacheNameMatch[1];
            if (!oldName.includes(`${appId}-consolidated`)) {
                const newName = `${appId}-consolidated-${oldName.replace(appId + '-', '')}`;
                transformed = transformed.replace(
                    /const\s+CACHE_NAME\s*=\s*['"`][^'"`]+['"`]/,
                    `const CACHE_NAME = '${newName}'`
                );
                changes.push({ type: 'CACHE_NAME', from: oldName, to: newName });
            }
        }
        
        // Pattern 2: Update precache URLs
        const urlArrayMatch = transformed.match(/(const\s+(?:urlsToCache|PRECACHE_URLS|URLS_TO_CACHE)\s*=\s*\[)([\s\S]*?)(\];)/i);
        if (urlArrayMatch) {
            const arrayContent = urlArrayMatch[2];
            let newArrayContent = arrayContent
                .replace(/['"]\.\//g, `'${basePath}`)
                .replace(/['"]\/['"],/g, `'${basePath}',`)
                .replace(/['"]\/['"]\s*\]/g, `'${basePath}']`);
            
            if (newArrayContent !== arrayContent) {
                transformed = transformed.replace(urlArrayMatch[0], urlArrayMatch[1] + newArrayContent + urlArrayMatch[3]);
                changes.push({ type: 'precache_urls', note: 'Updated to use base path' });
            }
        }
        
        // Pattern 3: Add scope comment
        if (!transformed.includes('// Consolidated PWA')) {
            const scopeComment = `// Consolidated PWA - Scope: ${basePath}\n// App: ${appId} | Env: ${env}\n\n`;
            transformed = scopeComment + transformed;
            changes.push({ type: 'scope_comment', note: 'Added scope identifier' });
        }
        
        return { transformed, changes };
    }
    
    function transformIndexHtml(content, appId, targetPath, env) {
        const changes = [];
        let transformed = content;
        const envConfig = ENVIRONMENTS[env];
        
        let basePath;
        if (env === 'prod') {
            basePath = targetPath ? `/${targetPath}` : '';
        } else {
            basePath = targetPath ? `${envConfig.targetBaseUrl}/${targetPath}` : envConfig.targetBaseUrl;
        }
        
        // Pattern 1: Update manifest link
        const manifestMatch = transformed.match(/<link\s+[^>]*rel=["']manifest["'][^>]*>/i);
        if (manifestMatch) {
            const oldLink = manifestMatch[0];
            if (oldLink.includes('href="/') && !oldLink.includes(basePath)) {
                const newLink = oldLink.replace(/href=["']\/[^"']*["']/, `href="${basePath}/manifest.json"`);
                if (newLink !== oldLink) {
                    transformed = transformed.replace(oldLink, newLink);
                    changes.push({ type: 'manifest_link', from: oldLink, to: newLink });
                }
            }
        }
        
        // Pattern 2: Update SW registration
        const swRegMatch = transformed.match(/navigator\.serviceWorker\.register\s*\(\s*['"`]([^'"`]+)['"`]/);
        if (swRegMatch) {
            const oldPath = swRegMatch[1];
            if (oldPath.startsWith('/') && !oldPath.startsWith(basePath)) {
                const newPath = `${basePath}/sw.js`;
                transformed = transformed.replace(swRegMatch[0], `navigator.serviceWorker.register('${newPath}'`);
                changes.push({ type: 'sw_registration', from: oldPath, to: newPath });
            }
        }
        
        return { transformed, changes };
    }
    
    // =========================================================================
    // ICONS
    // =========================================================================
    
    const Icons = {
        Check: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>,
        X: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>,
        Loader: () => <svg className="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"/><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"/></svg>,
        Folder: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" /></svg>,
        File: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>,
        ArrowRight: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg>,
        Rocket: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" /></svg>,
        Eye: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>,
        Download: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>,
        Refresh: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>,
        Warning: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>,
        GitBranch: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 3v18h18" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3" /></svg>,
        Globe: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" /></svg>,
        Beaker: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>,
    };
    
    // =========================================================================
    // MAIN APP
    // =========================================================================
    
    function App() {
        const [token, setToken] = React.useState(() => localStorage.getItem('gh_migration_token') || '');
        const [github, setGithub] = React.useState(null);
        const [connected, setConnected] = React.useState(false);
        const [user, setUser] = React.useState(null);
        
        const [environment, setEnvironment] = React.useState('prod'); // 'prod' or 'test'
        const [step, setStep] = React.useState(1); // 1: Connect, 2: Scan, 3: Preview, 4: Migrate, 5: Complete
        const [scanning, setScanning] = React.useState(false);
        const [migrating, setMigrating] = React.useState(false);
        
        const [sourceData, setSourceData] = React.useState({});
        const [transformedData, setTransformedData] = React.useState({});
        const [selectedApps, setSelectedApps] = React.useState(new Set(['quotle', 'slate', 'rungs', 'wordboxing']));
        
        const [logs, setLogs] = React.useState([]);
        const [migrationResult, setMigrationResult] = React.useState(null);
        
        const envConfig = ENVIRONMENTS[environment];
        
        const addLog = (message, type = 'info') => {
            setLogs(prev => [...prev, { message, type, time: new Date().toLocaleTimeString() }]);
        };
        
        // Reset state when environment changes
        React.useEffect(() => {
            setSourceData({});
            setTransformedData({});
            setSelectedApps(new Set(['quotle', 'slate', 'rungs', 'wordboxing']));
            setLogs([]);
            setMigrationResult(null);
            if (connected) {
                setStep(2);
            }
        }, [environment]);
        
        const handleConnect = async () => {
            if (!token) return;
            
            try {
                const gh = new GitHubAPI(token);
                const userData = await gh.testConnection();
                setGithub(gh);
                setUser(userData);
                setConnected(true);
                localStorage.setItem('gh_migration_token', token);
                addLog(`Connected as ${userData.login}`, 'success');
                setStep(2);
            } catch (e) {
                addLog(`Connection failed: ${e.message}`, 'error');
            }
        };
        
        const handleScan = async () => {
            if (!github) return;
            
            setScanning(true);
            setSourceData({});
            addLog(`Starting scan for ${envConfig.name} environment...`, 'info');
            
            const data = {};
            
            for (const [appId, config] of Object.entries(envConfig.apps)) {
                // Skip the hub - it's already in place
                if (config.isHub) {
                    addLog(`Skipping ${config.name} (hub already in place)`, 'info');
                    continue;
                }
                
                addLog(`Scanning ${config.name} (${config.sourceRepo})...`, 'info');
                
                data[appId] = {
                    config,
                    files: {},
                    icons: [],
                    status: 'pending'
                };
                
                try {
                    for (const filename of config.files) {
                        const file = await github.getFile(config.sourceRepo, filename);
                        if (file) {
                            data[appId].files[filename] = {
                                content: github.decodeContent(file.content),
                                sha: file.sha,
                                size: file.size
                            };
                            addLog(`  âœ“ Found ${filename}`, 'success');
                        } else {
                            addLog(`  âš  Missing ${filename}`, 'warning');
                        }
                    }
                    
                    for (const iconFolder of config.iconFolders) {
                        const icons = await github.listContents(config.sourceRepo, iconFolder);
                        if (Array.isArray(icons) && icons.length > 0) {
                            for (const icon of icons) {
                                if (icon.type === 'file') {
                                    data[appId].icons.push({
                                        name: icon.name,
                                        path: icon.path,
                                        sha: icon.sha,
                                        download_url: icon.download_url,
                                        folder: iconFolder
                                    });
                                }
                            }
                            addLog(`  âœ“ Found ${icons.length} icons in ${iconFolder}/`, 'success');
                        }
                    }
                    
                    data[appId].status = 'ready';
                } catch (e) {
                    addLog(`  âœ— Error scanning ${config.name}: ${e.message}`, 'error');
                    data[appId].status = 'error';
                    data[appId].error = e.message;
                }
            }
            
            setSourceData(data);
            setScanning(false);
            addLog('Scan complete!', 'success');
            setStep(3);
            
            transformFiles(data);
        };
        
        const transformFiles = (data) => {
            addLog('Transforming files for consolidated structure...', 'info');
            
            const transformed = {};
            
            for (const [appId, appData] of Object.entries(data)) {
                if (appData.status !== 'ready') continue;
                
                const config = appData.config;
                transformed[appId] = {
                    config,
                    files: {},
                    originalFiles: appData.files,
                    icons: appData.icons,
                    changes: []
                };
                
                if (appData.files['manifest.json']) {
                    const result = transformManifest(
                        appData.files['manifest.json'].content,
                        appId,
                        config.targetPath,
                        environment
                    );
                    transformed[appId].files['manifest.json'] = {
                        original: appData.files['manifest.json'].content,
                        transformed: result.transformed,
                        changes: result.changes
                    };
                    addLog(`  âœ“ Transformed ${appId}/manifest.json`, 'success');
                }
                
                if (appData.files['sw.js']) {
                    const result = transformServiceWorker(
                        appData.files['sw.js'].content,
                        appId,
                        config.targetPath,
                        environment
                    );
                    transformed[appId].files['sw.js'] = {
                        original: appData.files['sw.js'].content,
                        transformed: result.transformed,
                        changes: result.changes
                    };
                    addLog(`  âœ“ Transformed ${appId}/sw.js`, 'success');
                }
                
                if (appData.files['index.html']) {
                    const result = transformIndexHtml(
                        appData.files['index.html'].content,
                        appId,
                        config.targetPath,
                        environment
                    );
                    transformed[appId].files['index.html'] = {
                        original: appData.files['index.html'].content,
                        transformed: result.transformed,
                        changes: result.changes
                    };
                    if (result.changes.length > 0) {
                        addLog(`  âœ“ Transformed ${appId}/index.html`, 'success');
                    } else {
                        addLog(`  â„¹ ${appId}/index.html - no changes needed`, 'info');
                    }
                }
            }
            
            setTransformedData(transformed);
            addLog('Transformation complete!', 'success');
        };
        
        const handleMigrate = async () => {
            if (!github || selectedApps.size === 0) return;
            
            const confirmed = window.confirm(
                `âš ï¸ ${environment.toUpperCase()} MIGRATION\n\n` +
                `This will migrate ${selectedApps.size} app(s) to ${envConfig.targetRepo}.\n\n` +
                `Apps: ${Array.from(selectedApps).join(', ')}\n` +
                `Target: ${envConfig.targetDomain}\n\n` +
                `This will create/overwrite files in subfolders.\n` +
                `Continue?`
            );
            
            if (!confirmed) return;
            
            setMigrating(true);
            setStep(4);
            addLog(`Starting ${envConfig.name} migration...`, 'info');
            
            const filesToCommit = [];
            
            try {
                for (const appId of selectedApps) {
                    const appData = transformedData[appId];
                    if (!appData) continue;
                    
                    const config = appData.config;
                    const basePath = config.targetPath;
                    
                    addLog(`Preparing ${config.name}...`, 'info');
                    
                    for (const [filename, fileData] of Object.entries(appData.files)) {
                        const path = basePath ? `${basePath}/${filename}` : filename;
                        filesToCommit.push({
                            path,
                            content: github.encodeContent(fileData.transformed),
                            encoding: 'base64'
                        });
                        addLog(`  + ${path}`, 'info');
                    }
                    
                    for (const icon of appData.icons) {
                        try {
                            const response = await fetch(icon.download_url);
                            const blob = await response.blob();
                            const base64 = await new Promise((resolve, reject) => {
                                const reader = new FileReader();
                                reader.onload = () => resolve(reader.result.split(',')[1]);
                                reader.onerror = reject;
                                reader.readAsDataURL(blob);
                            });
                            
                            const iconPath = basePath 
                                ? `${basePath}/${icon.folder}/${icon.name}`
                                : `${icon.folder}/${icon.name}`;
                            
                            filesToCommit.push({
                                path: iconPath,
                                content: base64,
                                encoding: 'base64'
                            });
                            addLog(`  + ${iconPath}`, 'info');
                        } catch (e) {
                            addLog(`  âš  Failed to fetch icon ${icon.name}: ${e.message}`, 'warning');
                        }
                    }
                }
                
                addLog(`Committing ${filesToCommit.length} files to ${envConfig.targetRepo}...`, 'info');
                
                const result = await github.batchCommit(
                    envConfig.targetRepo,
                    filesToCommit,
                    `[${envConfig.name}] Consolidate ${selectedApps.size} apps (${Array.from(selectedApps).join(', ')})`
                );
                
                addLog(`âœ“ Migration complete! Commit: ${result.sha.substring(0, 7)}`, 'success');
                setMigrationResult({
                    success: true,
                    commitSha: result.sha,
                    filesCommitted: result.filesCommitted,
                    apps: Array.from(selectedApps),
                    environment
                });
                setStep(5);
                
            } catch (e) {
                addLog(`âœ— Migration failed: ${e.message}`, 'error');
                setMigrationResult({
                    success: false,
                    error: e.message
                });
            }
            
            setMigrating(false);
        };
        
        const toggleApp = (appId) => {
            setSelectedApps(prev => {
                const next = new Set(prev);
                if (next.has(appId)) {
                    next.delete(appId);
                } else {
                    next.add(appId);
                }
                return next;
            });
        };
        
        const getAppUrl = (appId) => {
            const config = envConfig.apps[appId];
            if (!config) return '';
            
            if (environment === 'prod') {
                return config.targetPath 
                    ? `https://${envConfig.targetDomain}/${config.targetPath}/`
                    : `https://${envConfig.targetDomain}/`;
            } else {
                return config.targetPath
                    ? `https://${envConfig.targetDomain}/${config.targetPath}/`
                    : `https://${envConfig.targetDomain}/`;
            }
        };
        
        return (
            <div className="min-h-screen p-6">
                <div className="max-w-6xl mx-auto">
                    {/* Header */}
                    <div className="text-center mb-8">
                        <h1 className="text-3xl font-bold mb-2 bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
                            ðŸ”„ Game Shelf Migration Tool
                        </h1>
                        <p className="text-slate-400">
                            Consolidate repos into unified structure
                        </p>
                    </div>
                    
                    {/* Environment Selector */}
                    <div className="flex justify-center mb-6">
                        <div className="bg-slate-800 rounded-xl p-1 flex gap-1">
                            <button
                                onClick={() => setEnvironment('prod')}
                                className={`px-6 py-3 rounded-lg font-medium flex items-center gap-2 transition-all ${
                                    environment === 'prod'
                                        ? 'bg-green-600 text-white'
                                        : 'text-slate-400 hover:text-white hover:bg-slate-700'
                                }`}
                            >
                                <Icons.Globe /> Production
                            </button>
                            <button
                                onClick={() => setEnvironment('test')}
                                className={`px-6 py-3 rounded-lg font-medium flex items-center gap-2 transition-all ${
                                    environment === 'test'
                                        ? 'bg-blue-600 text-white'
                                        : 'text-slate-400 hover:text-white hover:bg-slate-700'
                                }`}
                            >
                                <Icons.Beaker /> Test
                            </button>
                        </div>
                    </div>
                    
                    {/* Environment Info Banner */}
                    <div className={`mb-6 p-4 rounded-xl border ${
                        environment === 'prod' 
                            ? 'bg-green-900/20 border-green-700' 
                            : 'bg-blue-900/20 border-blue-700'
                    }`}>
                        <div className="flex items-center justify-between">
                            <div>
                                <div className={`font-semibold ${environment === 'prod' ? 'text-green-400' : 'text-blue-400'}`}>
                                    {envConfig.name} Environment
                                </div>
                                <div className="text-sm text-slate-400">{envConfig.description}</div>
                            </div>
                            <div className="text-right">
                                <div className="text-sm text-slate-500">Target</div>
                                <code className="text-sm bg-slate-800 px-2 py-1 rounded">{envConfig.targetDomain}</code>
                            </div>
                        </div>
                    </div>
                    
                    {/* Progress Steps */}
                    <div className="flex justify-center mb-8">
                        <div className="flex items-center gap-2">
                            {[
                                { num: 1, label: 'Connect' },
                                { num: 2, label: 'Scan' },
                                { num: 3, label: 'Preview' },
                                { num: 4, label: 'Migrate' },
                                { num: 5, label: 'Complete' }
                            ].map((s, i) => (
                                <React.Fragment key={s.num}>
                                    <div className={`flex items-center gap-2 px-3 py-2 rounded-lg transition-all ${
                                        step === s.num ? (environment === 'prod' ? 'bg-green-600' : 'bg-blue-600') + ' text-white' :
                                        step > s.num ? 'bg-green-600/20 text-green-400' :
                                        'bg-slate-800 text-slate-500'
                                    }`}>
                                        <span className={`w-6 h-6 rounded-full flex items-center justify-center text-sm ${
                                            step > s.num ? 'bg-green-500' : 'bg-slate-700'
                                        }`}>
                                            {step > s.num ? 'âœ“' : s.num}
                                        </span>
                                        <span className="text-sm font-medium">{s.label}</span>
                                    </div>
                                    {i < 4 && <div className={`w-8 h-0.5 ${step > s.num ? 'bg-green-500' : 'bg-slate-700'}`} />}
                                </React.Fragment>
                            ))}
                        </div>
                    </div>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* Main Panel */}
                        <div className="lg:col-span-2 space-y-6">
                            {/* Step 1: Connect */}
                            {step === 1 && (
                                <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6 fade-in">
                                    <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
                                        <Icons.GitBranch /> Connect to GitHub
                                    </h2>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm text-slate-400 mb-2">Personal Access Token</label>
                                            <input
                                                type="password"
                                                value={token}
                                                onChange={(e) => setToken(e.target.value)}
                                                placeholder="ghp_xxxxxxxxxxxx"
                                                className="w-full p-3 bg-slate-900 border border-slate-600 rounded-lg font-mono text-sm focus:border-indigo-500 focus:outline-none"
                                            />
                                            <a 
                                                href="https://github.com/settings/tokens/new?scopes=repo" 
                                                target="_blank"
                                                className="text-xs text-indigo-400 hover:underline mt-1 inline-block"
                                            >
                                                Create new token with 'repo' scope â†’
                                            </a>
                                        </div>
                                        <button
                                            onClick={handleConnect}
                                            disabled={!token}
                                            className="px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:bg-slate-700 disabled:cursor-not-allowed rounded-lg font-medium flex items-center gap-2 transition-colors"
                                        >
                                            Connect <Icons.ArrowRight />
                                        </button>
                                    </div>
                                </div>
                            )}
                            
                            {/* Step 2: Scan */}
                            {step === 2 && (
                                <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6 fade-in">
                                    <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
                                        <Icons.Folder /> Scan {envConfig.name} Repositories
                                    </h2>
                                    <p className="text-slate-400 mb-4">
                                        This will scan source repos and fetch files for migration.
                                    </p>
                                    
                                    <div className="bg-slate-900 rounded-lg p-4 mb-4">
                                        <h3 className="text-sm font-medium text-slate-300 mb-2">Source Repos:</h3>
                                        <ul className="space-y-1 text-sm">
                                            {Object.values(envConfig.apps).filter(a => !a.isHub).map(r => (
                                                <li key={r.id} className="flex items-center gap-2 text-slate-400">
                                                    <span>{r.icon}</span>
                                                    <span>{r.name}</span>
                                                    <span className="text-slate-600">â†’</span>
                                                    <code className="text-xs bg-slate-800 px-1 rounded">{r.sourceRepo}</code>
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                    
                                    <button
                                        onClick={handleScan}
                                        disabled={scanning}
                                        className={`px-6 py-3 ${environment === 'prod' ? 'bg-green-600 hover:bg-green-500' : 'bg-blue-600 hover:bg-blue-500'} disabled:bg-slate-700 rounded-lg font-medium flex items-center gap-2 transition-colors`}
                                    >
                                        {scanning ? <><Icons.Loader /> Scanning...</> : <><Icons.Refresh /> Start Scan</>}
                                    </button>
                                </div>
                            )}
                            
                            {/* Step 3: Preview */}
                            {step === 3 && (
                                <div className="space-y-4 fade-in">
                                    <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                                        <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
                                            <Icons.Eye /> Preview Changes
                                        </h2>
                                        <p className="text-slate-400 mb-4">
                                            Select apps to migrate to <code className="bg-slate-900 px-2 py-0.5 rounded">{envConfig.targetDomain}</code>
                                        </p>
                                        
                                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3 mb-6">
                                            {Object.entries(transformedData).map(([appId, data]) => (
                                                <button
                                                    key={appId}
                                                    onClick={() => toggleApp(appId)}
                                                    className={`p-4 rounded-lg border transition-all text-left ${
                                                        selectedApps.has(appId)
                                                            ? (environment === 'prod' ? 'bg-green-600/20 border-green-500' : 'bg-blue-600/20 border-blue-500')
                                                            : 'bg-slate-900 border-slate-700 hover:border-slate-600'
                                                    }`}
                                                >
                                                    <div className="flex items-center gap-2 mb-1">
                                                        <span className="text-xl">{data.config.icon}</span>
                                                        <span className="font-medium">{data.config.name}</span>
                                                        {selectedApps.has(appId) && (
                                                            <span className="ml-auto text-green-400"><Icons.Check /></span>
                                                        )}
                                                    </div>
                                                    <div className="text-xs text-slate-500">
                                                        â†’ /{data.config.targetPath || '(root)'}
                                                    </div>
                                                    <div className="text-xs text-slate-600 mt-1">
                                                        {Object.keys(data.files).length} files, {data.icons.length} icons
                                                    </div>
                                                </button>
                                            ))}
                                        </div>
                                        
                                        <button
                                            onClick={handleMigrate}
                                            disabled={selectedApps.size === 0 || migrating}
                                            className={`px-6 py-3 ${environment === 'prod' ? 'bg-green-600 hover:bg-green-500' : 'bg-blue-600 hover:bg-blue-500'} disabled:bg-slate-700 disabled:cursor-not-allowed rounded-lg font-medium flex items-center gap-2 transition-colors`}
                                        >
                                            {migrating ? <><Icons.Loader /> Migrating...</> : <><Icons.Rocket /> Migrate {selectedApps.size} App(s) to {envConfig.name}</>}
                                        </button>
                                    </div>
                                    
                                    {/* Transformation Details */}
                                    {selectedApps.size > 0 && (
                                        <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                                            <h3 className="text-lg font-semibold mb-4">Transformation Details</h3>
                                            
                                            {Array.from(selectedApps).map(appId => {
                                                const data = transformedData[appId];
                                                if (!data) return null;
                                                
                                                return (
                                                    <div key={appId} className="mb-6 last:mb-0">
                                                        <h4 className="font-medium mb-2 flex items-center gap-2">
                                                            <span>{data.config.icon}</span>
                                                            {data.config.name}
                                                            <span className="text-slate-500">â†’</span>
                                                            <code className="text-sm bg-slate-900 px-2 py-0.5 rounded">
                                                                {getAppUrl(appId)}
                                                            </code>
                                                        </h4>
                                                        
                                                        {data.files['manifest.json']?.changes?.length > 0 && (
                                                            <div className="mb-2">
                                                                <div className="text-sm text-slate-400 mb-1">manifest.json:</div>
                                                                <div className="bg-slate-900 rounded p-2 text-xs font-mono">
                                                                    {data.files['manifest.json'].changes.map((c, i) => (
                                                                        <div key={i} className="diff-add pl-2 py-0.5">
                                                                            {c.field}: "{c.to}"
                                                                        </div>
                                                                    ))}
                                                                </div>
                                                            </div>
                                                        )}
                                                        
                                                        {data.files['sw.js']?.changes?.length > 0 && (
                                                            <div className="mb-2">
                                                                <div className="text-sm text-slate-400 mb-1">sw.js:</div>
                                                                <div className="bg-slate-900 rounded p-2 text-xs font-mono">
                                                                    {data.files['sw.js'].changes.map((c, i) => (
                                                                        <div key={i} className="diff-add pl-2 py-0.5">
                                                                            {c.type}: {c.note || `${c.from} â†’ ${c.to}`}
                                                                        </div>
                                                                    ))}
                                                                </div>
                                                            </div>
                                                        )}
                                                        
                                                        <div className="text-xs text-slate-500">
                                                            + {data.icons.length} icon files
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    )}
                                </div>
                            )}
                            
                            {/* Step 4: Migrating */}
                            {step === 4 && migrating && (
                                <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6 fade-in">
                                    <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
                                        <Icons.Loader /> Migration in Progress
                                    </h2>
                                    <p className="text-slate-400">
                                        Please wait while files are being committed to {envConfig.targetRepo}...
                                    </p>
                                </div>
                            )}
                            
                            {/* Step 5: Complete */}
                            {step === 5 && (
                                <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6 fade-in">
                                    {migrationResult?.success ? (
                                        <>
                                            <h2 className="text-xl font-semibold mb-4 flex items-center gap-2 text-green-400">
                                                <Icons.Check /> {envConfig.name} Migration Complete!
                                            </h2>
                                            <div className="space-y-4">
                                                <div className="bg-green-900/20 border border-green-800 rounded-lg p-4">
                                                    <div className="text-sm space-y-1">
                                                        <div>âœ“ Commit: <code className="bg-slate-900 px-2 py-0.5 rounded">{migrationResult.commitSha?.substring(0, 7)}</code></div>
                                                        <div>âœ“ Files committed: {migrationResult.filesCommitted}</div>
                                                        <div>âœ“ Apps migrated: {migrationResult.apps?.join(', ')}</div>
                                                    </div>
                                                </div>
                                                
                                                <div className="bg-slate-900 rounded-lg p-4">
                                                    <h3 className="font-medium mb-2">New URLs:</h3>
                                                    <ul className="space-y-1 text-sm">
                                                        {migrationResult.apps?.map(appId => {
                                                            const url = getAppUrl(appId);
                                                            const config = envConfig.apps[appId];
                                                            return (
                                                                <li key={appId} className="flex items-center gap-2">
                                                                    <span>{config?.icon}</span>
                                                                    <a href={url} target="_blank" className="text-indigo-400 hover:underline">{url}</a>
                                                                </li>
                                                            );
                                                        })}
                                                    </ul>
                                                </div>
                                                
                                                <div className="bg-amber-900/20 border border-amber-800 rounded-lg p-4">
                                                    <h3 className="font-medium text-amber-400 mb-2 flex items-center gap-2">
                                                        <Icons.Warning /> Next Steps
                                                    </h3>
                                                    <ol className="text-sm space-y-1 list-decimal list-inside text-slate-300">
                                                        <li>Wait 1-2 minutes for GitHub Pages to rebuild</li>
                                                        <li>Test each app URL above</li>
                                                        <li>Verify PWA install works on each</li>
                                                        <li>Check service worker scope in DevTools</li>
                                                        {environment === 'prod' && (
                                                            <>
                                                                <li>Update Game Shelf hub links to new paths</li>
                                                                <li>Test Firebase auth on each game</li>
                                                            </>
                                                        )}
                                                        <li>Update Command Center for new structure</li>
                                                    </ol>
                                                </div>
                                                
                                                <button
                                                    onClick={() => {
                                                        setStep(2);
                                                        setSourceData({});
                                                        setTransformedData({});
                                                        setMigrationResult(null);
                                                        setLogs([]);
                                                    }}
                                                    className="px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm"
                                                >
                                                    â† Start Another Migration
                                                </button>
                                            </div>
                                        </>
                                    ) : (
                                        <>
                                            <h2 className="text-xl font-semibold mb-4 flex items-center gap-2 text-red-400">
                                                <Icons.X /> Migration Failed
                                            </h2>
                                            <div className="bg-red-900/20 border border-red-800 rounded-lg p-4">
                                                <p className="text-sm">{migrationResult?.error}</p>
                                            </div>
                                            <button
                                                onClick={() => setStep(3)}
                                                className="mt-4 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg"
                                            >
                                                â† Back to Preview
                                            </button>
                                        </>
                                    )}
                                </div>
                            )}
                        </div>
                        
                        {/* Log Panel */}
                        <div className="lg:col-span-1">
                            <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-4 sticky top-6">
                                <h3 className="font-semibold mb-3 flex items-center justify-between">
                                    <span>Activity Log</span>
                                    {connected && (
                                        <span className="text-xs text-green-400 flex items-center gap-1">
                                            <span className="w-2 h-2 bg-green-400 rounded-full"></span>
                                            {user?.login}
                                        </span>
                                    )}
                                </h3>
                                <div className="bg-slate-900 rounded-lg p-3 h-96 overflow-y-auto font-mono text-xs space-y-1">
                                    {logs.length === 0 ? (
                                        <div className="text-slate-600">Waiting to start...</div>
                                    ) : (
                                        logs.map((log, i) => (
                                            <div 
                                                key={i} 
                                                className={`slide-in ${
                                                    log.type === 'error' ? 'text-red-400' :
                                                    log.type === 'success' ? 'text-green-400' :
                                                    log.type === 'warning' ? 'text-amber-400' :
                                                    'text-slate-400'
                                                }`}
                                            >
                                                <span className="text-slate-600">{log.time}</span> {log.message}
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                            
                            {/* Target Structure Preview */}
                            <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-4 mt-4">
                                <h3 className="font-semibold mb-3">Target Structure ({envConfig.name})</h3>
                                <pre className="text-xs text-slate-400 bg-slate-900 rounded-lg p-3 overflow-x-auto">
{environment === 'prod' ? `gameshelf.co/
â”œâ”€â”€ index.html      â† Game Shelf hub
â”œâ”€â”€ sw.js
â”œâ”€â”€ manifest.json
â”œâ”€â”€ CNAME
â”œâ”€â”€ icons/
â”œâ”€â”€ quotle/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ sw.js
â”‚   â”œâ”€â”€ manifest.json
â”‚   â””â”€â”€ icons/
â”œâ”€â”€ slate/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ rungs/
â”‚   â””â”€â”€ ...
â””â”€â”€ wordboxing/
    â””â”€â”€ ...` : `gameshelftest/
â”œâ”€â”€ index.html      â† Game Shelf hub
â”œâ”€â”€ sw.js
â”œâ”€â”€ manifest.json
â”œâ”€â”€ icons/
â”œâ”€â”€ quotle/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ sw.js
â”‚   â”œâ”€â”€ manifest.json
â”‚   â””â”€â”€ icons/
â”œâ”€â”€ slate/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ rungs/
â”‚   â””â”€â”€ ...
â””â”€â”€ wordboxing/
    â””â”€â”€ ...`}
                                </pre>
                            </div>
                        </div>
                    </div>
                    
                    {/* Footer */}
                    <div className="text-center mt-8 text-sm text-slate-600">
                        Migration Tool v{VERSION} â€¢ {environment === 'prod' ? 'ðŸŸ¢ Production' : 'ðŸ”µ Test'} Mode
                    </div>
                </div>
            </div>
        );
    }
    
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
